"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const axios_1 = require("axios");
const exceptions_1 = require("./exceptions");
const pkg = require("../package.json");
function wrapError(error) {
    if (error.response) {
        throw new exceptions_1.HTTPError(error.message, error.response.status, error.response.statusText, error);
    }
    else if (error.code) {
        throw new exceptions_1.RequestError(error.message, error.code, error);
    }
    else if (error.config) {
        throw new exceptions_1.ReadError(error);
    }
    throw error;
}
const userAgent = `${pkg.name}/${pkg.version}`;
function get(url, headers) {
    headers["User-Agent"] = userAgent;
    return axios_1.default
        .get(url, { headers })
        .then((res) => res.data)
        .catch(wrapError);
}
exports.get = get;
function post(url, headers, data) {
    headers["Content-Type"] = "application/json";
    headers["User-Agent"] = userAgent;
    return axios_1.default
        .post(url, data, { headers })
        .then((res) => res.data)
        .catch(wrapError);
}
exports.post = post;
